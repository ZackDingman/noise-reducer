<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Zack’s Audio Outpost — Noise Reduction</title>
  <meta name="description" content="Free in‑browser voice noise reduction (mono + true stereo). All processing on device.">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="site-header">
    <div class="wrap header-grid">
      <div class="brand">
        <img src="./logo.svg" alt="Zack's Audio Outpost" class="logo">
        <h1>Noise Reduction</h1>
      </div>
      <div id="rn-status" class="status status-bad" title="RNNoise module status">RNNoise: not loaded</div>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <p class="subtle">Clean up hiss, hum, and background noise — right in your browser. Supports <strong>mono</strong> and <strong>true stereo</strong>. Your audio never leaves your device.</p>

      <div id="drop" class="dropzone" tabindex="0" aria-label="Drop audio file here or use the file picker">
        <p>Drop audio here or</p>
        <label class="button">
          <input id="fileInput" type="file" accept="audio/*" hidden>
          Choose a file
        </label>
      </div>

      <div class="controls">
        <div class="control">
          <label for="strength">Denoise strength</label>
          <input id="strength" type="range" min="0" max="2" step="1" value="1">
          <div class="ticks"><span>Light</span><span>Normal</span><span>Strong</span></div>
        </div>
        <div class="control">
          <label for="wet">Wet/Dry mix</label>
          <input id="wet" type="range" min="0" max="100" step="1" value="85">
          <div class="ticks"><span>Dry</span><span></span><span>Wet</span></div>
        </div>
      </div>

      <div id="progressWrap" class="progress-wrap hidden">
        <div class="progress-bar"><div id="progressBar"></div></div>
        <p class="muted" id="progressText">Processing…</p>
      </div>

      <div id="preview" class="grid hidden">
        <div class="pane">
          <h3>Original</h3>
          <audio id="playerOriginal" controls></audio>
        </div>
        <div class="pane">
          <h3>Denoised</h3>
          <audio id="playerDenoised" controls></audio>
          <a id="downloadLink" class="button outline" download="denoised.wav">Download WAV</a>
        </div>
      </div>

      <details class="diag">
        <summary>Diagnostics</summary>
        <pre id="diag"></pre>
      </details>

      <p class="tip muted">Tips: For noisy dialogue, try <strong>Strong</strong> + <strong>Wet 100%</strong>. For music/ambience, use <strong>Light</strong> and lower Wet (50–70%).</p>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p class="muted">Powered by RNNoise (WASM). All processing happens locally in your browser.</p>
    </div>
  </footer>

  <script type="module" src="./app.js"></script>
</body>
</html>
